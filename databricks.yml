# This is a sample Databricks Asset Bundle configuration.
# For details, see https://docs.databricks.com/dev-tools/bundles/index.html

bundle:
  name: my_databricks_project

resources:
  jobs:
    create_volume_job:
      name: ai_newsletter_create_volume
      tasks:
        - task_key: run_create_volume_script
          notebook_task:
            notebook_path: ./src/create_uc_volume.py
      # No schedule, as this is a one-time setup job

    twitter_ingestion_job:
      name: ai_newsletter_twitter_ingestion
      tasks:
        - task_key: run_ingestion_script
          notebook_task:
            notebook_path: ./src/twitter_ingestion_script.py
            parameters: # Nested directly under notebook_task
              raw_data_path: "/Volumes/main/default/ai_newsletter_raw_tweets/"
      schedule:
        quartz_cron_expression: "0 */15 * * * ?" # Every 15 minutes
        timezone_id: UTC

    ai_newsletter_bronze_job:
      name: ai_newsletter_bronze_processing
      tasks:
        - task_key: run_bronze_processing
          notebook_task:
            notebook_path: ./src/ingestion_job.py
            parameters: # Nested directly under notebook_task
              raw_data_path: "/Volumes/main/default/ai_newsletter_raw_tweets/"
              min_faves_filter: "10"
      schedule:
        quartz_cron_expression: "0 0 * * * ?" # Hourly, or as needed after ingestion
        timezone_id: UTC
